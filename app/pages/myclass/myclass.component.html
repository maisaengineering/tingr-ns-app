<ActionBar title="">
    <!-- left area  -->
    <NavigationButton *ngIf="isIos" visibility="collapsed"></NavigationButton>
    <NavigationButton *ngIf="isAndroid" icon="res://ic_menu" (tap)="openDrawer()"></NavigationButton>
    <ActionItem *ngIf="isIos" icon="res://ic_menu" visibility="visible"
                ios.position="left" (tap)="openDrawer()"></ActionItem>

    <!-- center area  -->
    <StackLayout orientation="horizontal"
                 ios:horizontalAlignment="center"
                 android:horizontalAlignment="center" (tap)="openRooms()">
        <StackLayout *ngIf="assignedRooms.length" orientation="horizontal" verticalAlignment="center">
            <Label [text]="roomName" class="action-label"></Label>
            <Label class="blue2 material-icons md-24 md-arrow-drop-down m-r-10" text="&#xE5C5;"></Label>
        </StackLayout>
    </StackLayout>
    <!-- right area  -->
</ActionBar>


<RadSideDrawer #drawerComponent tkToggleNavButton>
    <ScrollView tkDrawerContent class="drawer-content">
        <StackLayout horizzontalAlign="left">
            <drawer-content></drawer-content>
        </StackLayout>
    </ScrollView>
    <GridLayout tkMainContent>
        <PullToRefresh (refresh)="refreshList($event)" #pullToRefresh>
            <ScrollView>

                <StackLayout>
                    <StackLayout *ngFor="let item of managed_kids">
                        <StackLayout id="kid-{{ item.kid_klid }}" [kid]="item" (tap)="onTapKid(item)" class="list-group-item"
                                     (loaded)="kidLoaded($event)">
                            <GridLayout rows="*" columns="auto,*,70">
                                <StackLayout row="0" col="0">
                                    <Image height="75" width="75" class="kid-profile-pic blue-circle-border"
                                           src="{{ item.photograph_url ? item.photograph_url : '~/images/avatar-100.png' }}"></Image>
                                </StackLayout>

                                <StackLayout row="0" col="1" verticalAlignment="center" orientation="vertical"
                                             class="p-l-20">
                                    <Label [text]="item.fname+' '+item.lname" class="kid-name"></Label>
                                    <Label [text]="item.age+' old'" class="text-muted kid-age"></Label>
                                </StackLayout>

                                <StackLayout row="0" col="2" class="m-t-5" verticalAlignment="center"
                                             orientation="vertical" horizontalAlignment="right">
                                    <Image height="30" width="40" verticalAlignment="center" stretch="aspectFill"
                                           src="~/images/profile-details-40.png"></Image>
                                    <StackLayout class="m-t-5" orientation="horizontal" verticalAlignment="center"
                                                 horizontalAlignment="center">
                                        <StackLayout *ngIf="item.reminders_count != 0">
                                            <Label text="{{ item.reminders_count > 9 ? item.reminders_count+'+' : item.reminders_count }}"
                                                   class="number-with-circle reminders-count text-center"></Label>
                                        </StackLayout>
                                        <StackLayout *ngIf="item.messages_count != 0">
                                            <Label text="{{ item.messages_count > 9 ? item.messages_count+'+' : item.messages_count }}"
                                                   class="number-with-circle notifications-count text-center"></Label>
                                        </StackLayout>
                                    </StackLayout>
                                </StackLayout>
                            </GridLayout>
                            <StackLayout visibility="{{ item.in_or_out_time? 'visible' : 'collapsed' }}"
                                         verticalAlignment="center" orientation="vertical" horizontalAlignment="center">
                                <Label id="in-or-out-time-{{ item.kid_klid }}"
                                       class="in-or-out-time bg-primary bg-green-label light-gray font-italic p-x-10 m-t-5"
                                       text="{{ item.in_or_out_time }}"></Label>
                            </StackLayout>
                        </StackLayout>
                        <StackLayout class="hr-shadow m-t-0"></StackLayout>
                    </StackLayout>

                </StackLayout>

            </ScrollView>
        </PullToRefresh>

        <StackLayout class="dimmer" visibility="{{ isLoading ? 'visible' : 'collapsed'}}"></StackLayout>
        <GridLayout rows="*" visibility="{{ isLoading ? 'visible' : 'collapsed'}}">
            <ActivityIndicator class="busy activity-indicator" busy="true"></ActivityIndicator>
        </GridLayout>

    </GridLayout>
</RadSideDrawer>
