<ActionBar title="">
    <NavigationButton text="Menu" icon="res://ic_menu" (tap)="openDrawer()"></NavigationButton>
    <StackLayout orientation="horizontal"
                 ios:horizontalAlignment="center"
                 android:horizontalAlignment="center">
        <Image src="~/images/calendar-icon-white-48.png"
               class="m-r-5 action-image" stretch="none"></Image>
        <Label text="Dialy"  class="action-label"></Label>
    </StackLayout>
</ActionBar>

<RadSideDrawer #drawerComponent tkToggleNavButton>
    <ScrollView tkDrawerContent class="drawer-content">
        <StackLayout horizzontalAlign="left">
            <drawer-content></drawer-content>
        </StackLayout>
    </ScrollView>
    <StackLayout tkMainContent>
        <ScrollView>
            <StackLayout tkMainContent>

                <StackLayout text="top" dock="top" orientation="vertical" class="today-date green font-weight-bold">
                    <Label (tap)="createModalDatePickerView()" text="{{ currentDate  | date: 'EEEE, MMMM d' }}" class="text-center"></Label>
                </StackLayout>

                <StackLayout class="line-separator">
                </StackLayout>


                <!-- ##################  Scheules-------------------------------------------------------------------------------->
                <DockLayout *ngIf="schedules.length" stretchLastChild="false" class="calendar-schedule">
                    <Image dock="left" stretch ="none" verticalAlignment="center" class="schedule-icon"  src="~/images/schedule-icon-72.png"></Image>
                    <StackLayout text="top" dock="top">
                        <GridLayout rows="auto,auto" *ngFor="let item of schedules; let i = index" >
                            <GridLayout row="0" columns="auto, auto" rows="auto,auto" class="item">
                                <Label col="0"  row="0"
                                       text="{{item.start_time | date: 'HH:mm' }}-{{ item.end_time | date: 'HH:mm a' }}">
                                </Label>
                                <Label col="1" row="0"  class="event" text="{{ item.name }}" textWrap="true"></Label>
                            </GridLayout>
                            <!-- Don't show horizontal line for last element -->
                            <StackLayout *ngIf="schedules.length > (i+1)" class="hr-light" row="1"></StackLayout>
                        </GridLayout>
                    </StackLayout>
                </DockLayout>

                <StackLayout *ngIf="schedules.length" class="line-separator">
                </StackLayout>

                <!-- ##################  Reminders-------------------------------------------------------------------------------->

                <DockLayout *ngIf="event_reminders.length || birthdays.length || holidays.length" stretchLastChild="false" class="calendar-reminder font-italic">
                    <Image dock="left" stretch ="none" verticalAlignment="center" class="reminder-icon"  src="~/images/reminder-icon-72.png"></Image>
                    <StackLayout text="top" dock="top">

                        <!-- Birthdays -->
                        <SatckLayout orientation="horizontal" *ngFor="let item of birthdays; let i = index" >
                            <Label col="0" text="{{item.description}}" class="item"></Label>
                            <StackLayout *ngIf="birthdays.length > (i+1)" class="hr-light" row="1"></StackLayout>
                        </SatckLayout>

                        <!-- Event Reminders -->
                        <StackLayout *ngIf="birthdays.length > 0 && event_reminders.length > 0"  class="hr-light" row="1"></StackLayout>
                        <SatckLayout orientation="horizontal" *ngFor="let item of event_reminders; let i = index" >
                            <Label col="0" text="{{ item.description }}" class="item" textWrap="true"></Label>
                            <StackLayout *ngIf="event_reminders.length > (i+1)" class="hr-light" row="1"></StackLayout>
                        </SatckLayout>

                        <!-- Holidays -->
                        <StackLayout *ngIf="event_reminders.length > 0 && birthdays.length > 0 && holidays.length > 0"
                                     class="hr-light" row="1"></StackLayout>
                        <SatckLayout orientation="horizontal" *ngFor="let item of holidays; let i = index" >
                            <Label col="0" text="{{ item.description }}" class="item blue" textWrap="true"></Label>
                            <StackLayout *ngIf="holidays.length > (i+1)" class="hr-light" row="1"></StackLayout>
                        </SatckLayout>

                    </StackLayout>
                </DockLayout>

                <StackLayout class="line-separator" *ngIf="event_reminders.length || birthdays.length || holidays.length" >
                </StackLayout>

                <!-- ##################  Messages -------------------------------------------------------------------------------->
                <DockLayout *ngIf="messages.length"  stretchLastChild="false" class="calendar-message">
                    <Image dock="left" stretch ="none" verticalAlignment="center" class="message-icon"  src="~/images/message-icon-72.png"></Image>
                    <StackLayout text="top" dock="top">
                        <GridLayout rows="auto,auto" *ngFor="let item of messages; let i = index" >
                            <GridLayout row="0" columns="50, *" rows="*" class="item">
                                <StackLayout  verticalAlignment="center">
                                    <!--<Image stretch ="none" col="0" horizontalAlignment="center"
                                           class="{{ item.photograph ? 'img-circle' : 'rounded-corner-icon avatar-icon'}}"
                                           src="{{ item.photograph ? item.photograph : '~/images/avatar-icon-32.png' }}"></Image>-->
                                    <Image stretch ="none" col="0" horizontalAlignment="center"
                                           [nsRouterLink]="['/kid-dashboard']"
                                           class="img-circle blue-circle-border" src="https://placeimg.com/70/70/people"></Image>
                                </StackLayout>
                                <StackLayout col="1">
                                    <StackLayout col="1" orientation="horizontal">
                                        <Label class="kid-name" [text]="item.child_name" textwrap="true"></Label>
                                        <Label class="relation-name light-gray" [text]="item.child_relationship" textwrap="true"></Label>
                                    </StackLayout>
                                    <Label [text]="item.text" class="{{ item.read_message ? 'very-light-gray' : 'blue' }}" col="1" textwrap="true"></Label>
                                </StackLayout>
                            </GridLayout>
                            <!-- Don't show horizontal line for last element -->
                            <StackLayout *ngIf="messages.length > (i+1)" class="hr-light" row="1"></StackLayout>
                        </GridLayout>
                    </StackLayout>
                </DockLayout>


            </StackLayout>
        </ScrollView>
    </StackLayout>
</RadSideDrawer>